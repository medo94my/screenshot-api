# Syntax: https://render.com/docs/yaml-spec

# Screenshot API Service Blueprint for Render
# Deploy via: https://dashboard.render.com/blueprints/new?repo=https://github.com/medo94my/screenshot-api

services:
  - name: screenshot-api
    type: web
    plan: standard  # Standard (1 GB RAM) recommended for Playwright
    region: oregon
    
    # Docker deployment
    docker:
      context: .
      dockerfile: Dockerfile
    
    # Health check
    healthCheckPath: /health
    
    # Environment variables
    # Note: PORT is automatically set by Render for web services
    envVars:
      - key: PYTHON_VERSION
        value: "3.12"
      - key: HOST
        value: "0.0.0.0"
      - key: MAX_CONCURRENCY
        value: "2"
      - key: RATE_LIMIT_PER_MINUTE
        value: "30"
      - key: CACHE_TTL_SECONDS
        value: "300"
      - key: CACHE_DIR
        value: "/tmp/screenshot-cache"
      - key: NAV_TIMEOUT_MS
        value: "30000"
      - key: DEBUG
        value: "false"
      - key: MAX_DELAY_MS
        value: "5000"
    
    # Scaling
    scaling:
      minInstances: 1
      maxInstances: 1
